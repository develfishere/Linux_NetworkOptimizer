# بهینه‌ساز شبکه لینوکس نسخه 0.2

این مخزن شامل یک **اسکریپت Bash** است که برای بهبود خودکار سرعت و عملکرد شبکه در سیستم‌های لینوکس ساخته شده است

این اسکریپت با استفاده از الگوریتم **BBR**، تنظیمات شبکه را **به‌طور هوشمند** بر اساس ویژگی‌های سخت‌افزاری سیستم مانند **پردازنده** و حافظه **رم** و همچنین **سرعت فعلی شبکه** بهینه‌سازی می‌کند

در این فرآیند، مناسب‌ترین الگوریتم صف‌بندی از میان **fq** و **fq_codel** و **cake** به‌طور پویا انتخاب و پیاده‌سازی می‌شود تا بهترین عملکرد و کمترین تاخیر حاصل شود

## ویژگی‌های کلیدی

1- انتخاب و پیکربندی هوشمند الگوریتم صف‌بندی‌ها (`fq`, `fq_codel`, `cake`) بر اساس منابع سیستم

2- پیاده‌سازی کنترل ازدحام `BBR` برای دستیابی به پهنای باند بهینه و تأخیر کم

3- تنظیم اندازه بافرهای TCP (`tcp_rmem`, `tcp_wmem`) بر اساس CPU، RAM و سرعت شبکه سیستم

4- انجام ارزیابی شبکه با استفاده از `speedtest-cli` برای بهبود پویا تنظیمات شبکه

5- بهینه‌سازی `netdev_max_backlog` و بافرهای حافظه برای مدیریت حجم بالای اتصالات TCP

6- ارائه پشتیبان‌گیری خودکار و بازیابی تنظیمات اصلی شبکه

## تغییرات

<details>
  <summary><strong>نسخه 0.2 - 2024-10-23</strong></summary>

### ویژگی‌های جدید

1- انتخاب خوکار الگوریتم صف‌بندی‌ها (`fq`, `fq_codel`, `cake`) بر اساس منابع سیستم (RAM و CPU)

**سیستم‌های ضعیف**: از `fq_codel` برای کاهش تأخیر استفاده می‌کند

**سیستم‌های متوسط**: از `fq` برای عملکرد متعادل استفاده می‌کند

**سیستم‌های قوی**: از `cake` برای مدیریت پیشرفته صف و عملکرد بهینه در سناریوهای پرترافیک استفاده می‌کند

2- بهبود تنظیمات بافر حافظه TCP و پشتیبانی:

به‌طور پویا `rmem_max`، `wmem_max` و `netdev_max_backlog` بر اساس منابع سیستم (RAM و CPU) تنظیم می‌شود

3- بهینه‌سازی تنظیمات شبکه بر اساس سرعت شبکه:

به‌طور خودکار `tcp_rmem` و `tcp_wmem` برای سرعت‌های مختلف شبکه پیکربندی می‌شود تا پهنای باند بهینه و تأخیر کم را فراهم کند

### تغییرات این نسخه

1- تنظیم صف‌بندی پیش‌فرض از طریق `net.core.default_qdisc` به‌طور پویا بر اساس ارزیابی‌های سیستم

2- حفظ `bbr` به‌عنوان الگوریتم کنترل ازدحام TCP پیش‌فرض برای دستیابی به پهنای باند بهینه و تأخیر کم

3- به‌روزرسانی مکانیزم ثبت sysctl برای ضبط انتخاب صف‌بندی و تنظیمات شبکه

### باگ‌های رفع شده

1- جلوگیری از ایجاد بکاپ تکراری از فایل `sysctl.conf` اگر قبلاً بکاپ وجود داشته باشد،

2- بهینه‌سازی فرآیند پیکربندی

### سایر موارد

1- بهبود و افزایش خوانایی لاگ‌های اجرای اسکریپت

</details>

## پیش‌نیازها

### اطمینان حاصل کنید که بسته‌های `sudo` و `curl` بر روی سیستم شما نصب شده باشند

#### برای Ubuntu و Debian

```bash
sudo apt update -q && sudo apt install -y sudo curl
```

### این اسکریپت نیاز به دسترسی روت (Sudo) دارد اگر به عنوان روت وارد سیستم نشده‌اید، از دستور زیر استفاده کنید

```bash
sudo -i
```

## نحوه استفاده

برای به‌روزرسانی سیستم و اجرای اسکریپت از دستور زیر استفاده کنید

```bash
sudo apt update && sudo apt upgrade -y && bash <(curl -Ls https://raw.githubusercontent.com/develfishere/Linux_NetworkOptimizer/main/bbr.sh --ipv4)
```

## پشتیبانی

اگر با مشکلی مواجه شدید یا پیشنهادی دارید، می‌توانید آن را در [بخش مشکلات GitHub](https://github.com/develfishere/Linux_NetworkOptimizer/issues) مطرح کنید

## نکته مهم

این اسکریپت به صورت "همان‌گونه که هست" ارائه شده است و هیچ ضمانتی بابت آن ارائه نمی‌شود. استفاده از آن به عهده خود شماست

## مجوز

این پروژه تحت مجوز MIT ارائه شده است
